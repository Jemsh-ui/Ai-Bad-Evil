<!DOCTYPE html>
<html>
<head>
    <title>Bad Evil V1.1</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        #game-container {
            background-color: #fff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #result, #hack-records {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }

        #clear-history-button, #telegram-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        #game-history {
            margin-top: 20px;
        }

        #game-history-list {
            list-style: none;
            padding: 0;
        }

        #game-history-list li {
            margin-bottom: 5px;
        }

        /* Dialog Styling */
        #dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            display: none;
        }

        #dialog p {
            margin-bottom: 10px;
        }

        #close-dialog {
            background-color: #4CAF50;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        /* Timer Styling */
        #timer-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        #period-element, #timer-element {
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="timer-container">
            <span id="period1m">Initializing...</span>
            <span id="timer1m">00:00</span> 
        </div>
        <div id="result"></div> 
        <button id="clear-history-button">Clear History</button>
        <a id="telegram-button" href="https://t.me/badEvilMods" target="_blank">Telegram</a> 
        <div id="game-history">
            <h3>Game History</h3>
            <ul id="game-history-list"></ul>
        </div>
    </div>

    <div id="dialog">
        <p>Please enter a game code.</p>
        <button id="close-dialog">Close</button>
    </div>

    <script>
        var gameHistory = [];
        var lastPeriod = null;
        var lastResult = "UNKNOWN"; 

        function updatePeriodAndTimer() {
            const now = new Date();
            const seconds = now.getUTCSeconds();
            const remainingSeconds = 60 - seconds;
            const minutes = now.getUTCMinutes();
            const totalMinutes = now.getUTCHours() * 60 + minutes;

            const periodElement = document.getElementById("period1m");
            const periodNumber = `${now.getUTCFullYear()}${(now.getUTCMonth() + 1)
                .toString()
                .padStart(2, "0")}${now.getUTCDate().toString().padStart(2, "0")}1000${(
                10001 + totalMinutes
            ).toString()}`;
            periodElement.textContent = periodNumber;

            const timerElement = document.getElementById("timer1m");
            timerElement.textContent = `00:${remainingSeconds
                .toString()
                .padStart(2, "0")}`;

            if (remainingSeconds === 60) {
                displayResult(periodNumber); 
            }
        }

        function displayResult(currentPeriod) {
            if (currentPeriod === lastPeriod) {
                result = lastResult;
            } else {
                result = Math.random() < 0.5 ? "SMALL" : "BIG";
                lastPeriod = currentPeriod;
                lastResult = result;
            }

            document.getElementById("result").textContent = "Result: " + result;

            gameHistory.push({ "period": currentPeriod, "result": result }); 

            var historyList = document.getElementById("game-history-list");
            historyList.innerHTML = ""; 
            gameHistory.forEach(function(entry) {
                var listItem = document.createElement("li");
                listItem.textContent = "Period: " + entry.period + " - Result: " + entry.result;
                historyList.appendChild(listItem);
            });
        }

        setInterval(updatePeriodAndTimer, 1000);
        updatePeriodAndTimer();

        document.getElementById("clear-history-button").addEventListener("click", function() {
            gameHistory = []; 
            document.getElementById("game-history-list").innerHTML = ""; 
        });

        document.getElementById("telegram-button").addEventListener("click", function() {
            // ... (previous button click handling) ...
        });

    </script>

</body>
</html>
